<!-- This Source Code Form is subject to the terms of the Mozilla Public
- License, v. 2.0. If a copy of the MPL was not distributed with this file,
- You can obtain one at http://mozilla.org/MPL/2.0/. -->
<!DOCTYPE html>
<html manifest="compass.appcache">
<head>
<meta charset=utf-8 />
<title>Cardinal Direction Compass</title>
<style>
.pointer {
height: 0;
width: 0;
border-left: 2em solid transparent;
border-right: 2em solid transparent;
border-bottom: 8em solid black;
margin: -10px 0 0 -40px;
top: 40%;
left: 50%;
position: absolute;
}
.n {
top: 20%;
left:50%;
position:absolute;
font:5em Helvetica;
margin: 0 0 0 -40px;
}
</style>
<script src="js/jquery.js"></script>
</head>
<body>
<div class="n">N<br><br><br><br>S</div>
<div class="pointer"></div>

<script>
$(document).ready(function() {
if (window.DeviceOrientationEvent) {

//cgack-original handler
//window.addEventListener("deviceorientation", function (e) {
//rotate(360 - e.alpha);
window.addEventListener('deviceorientation', function(event) {
	  var dir='';
	  var alpha;
	  //Check for iOS property
	  if(event.webkitCompassHeading) {
	    alpha = event.webkitCompassHeading;
	    //Direction is reversed for iOS
	    dir='-';
	  }
	  else alpha = event.alpha;
	  $(".n").style.Transform = 'rotate(' + alpha + 'deg)';
	  $(".n").style.WebkitTransform = 'rotate('+dir + alpha + 'deg)';
	  $(".n").style.MozTransform = 'rotate(-' + alpha + 'deg)'; 

}, false);
}
});
</script>



</body>
</html>